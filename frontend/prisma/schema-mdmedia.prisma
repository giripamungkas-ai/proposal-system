generator client { provider = "prisma-client-js" }
datasource db { provider = "sqlite"; url = env("DATABASE_URL") }
model User { id Int @id @default(autoincrement()); email String @unique; password String; name String; role String @default("SALES"); managerId Int?; department String @default("SALES"); isActive Boolean @default(true); createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model Account { id Int @id @default(autoincrement()); accountCode String @unique; accountName String; clientName String?; clientPICName String?; clientPICPhone String?; clientPICEmail String; clientSegment String @default("TGU"); clientType String @default("SUSPECT"); salesManagerId Int?; salesId Int?; isActive Boolean @default(true); createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model Template { id Int @id @default(autoincrement()); code String @unique; name String; description String?; type String; category String; version String @default("1.0"); isActive Boolean @default(true); requiredFields String; createdBy Int; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model Proposal { id Int @id @default(autoincrement()); proposalCode String @unique; templateId Int; accountId Int; salesId Int; title String; clientName String; clientPIC String; clientPhone String; clientEmail String; projectName String; projectObjective String; scopeOfWork String; leadSource String; projectSegment String; projectQuality String; tenderType String; internalBriefDate DateTime; brainstormingDate DateTime; tenderPresentationDate DateTime; revenue BigInt; margin BigInt; proposalStatus String @default("DRAFT"); aiGenerated Boolean @default(false); aiComplianceScore Int @default(0); workflowStage String @default("DRAFT"); currentStage Int @default(1); totalStages Int @default(5); digitalSignature String?; watermarkInfo String?; submittedAt DateTime?; approvedAt DateTime?; createdBy Int; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model FormSubmission { id Int @id @default(autoincrement()); templateId Int; proposalId Int; formData String; status String @default("DRAFT"); version Int @default(1); isActive Boolean @default(true); createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model TechnicalSpec { id Int @id @default(autoincrement()); proposalId Int; userId Int; methodology String; specifications String; timeline String; resources String; budget String; status String @default("DRAFT"); aiGenerated Boolean @default(false); approvedAt DateTime?; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model BSApproval { id Int @id @default(autoincrement()); proposalId Int; userId Int; managerId Int; decision String; comment String?; aiScore Int @default(0); approvedAt DateTime?; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model HRRecord { id Int @id @default(autoincrement()); employeeId String @unique; name String; position String; department String; education String; experience String; skills String; phoneNumber String?; email String?; educationLevel String; joinDate DateTime; isActive Boolean @default(true); createdBy Int; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model AIRequest { id Int @id @default(autoincrement()); requestId String @unique; type String; model String; prompt String; response String?; success Boolean @default(false); processingTime Int?; userId Int; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model WorkflowLog { id Int @id @default(autoincrement()); proposalId Int; userId Int; action String; fromStage String; toStage String; description String?; systemGenerated Boolean @default(false); createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model Notification { id Int @id @default(autoincrement()); userId Int; type String; title String; message String; status String @default("PENDING"); priority String @default("MEDIUM"); readAt DateTime?; scheduledAt DateTime?; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model WeeklyReport { id Int @id @default(autoincrement()); weekNumber Int; year Int; generatedAt DateTime; reportData String; aiSummary String; totalProposals Int; approvedProposals Int; rejectedProposals Int; pendingProposals Int; successRate Float; slaMet Float; status String @default("PENDING"); sentAt DateTime?; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model Attachment { id Int @id @default(autoincrement()); fileName String; filePath String; fileSize Int; mimeType String; checksum String; version String @default("1.0"); category String; isEncrypted Boolean @default(false); uploadedBy Int; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model KanbanBoard { id Int @id @default(autoincrement()); name String; description String?; columns String; settings String; createdBy Int; isActive Boolean @default(true); createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model KanbanCard { id Int @id @default(autoincrement()); boardId Int; title String; description String?; status String; priority String @default("MEDIUM"); assigneeId Int?; createdBy Int; dueDate DateTime?; order Int @default(0); metadata String?; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model SystemSetting { id Int @id @default(autoincrement()); key String @unique; value String; description String?; category String; isPublic Boolean @default(false); editable Boolean @default(true); updatedBy Int; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
model AuditLog { id Int @id @default(autoincrement()); userId Int; action String; resourceType String; resourceId String?; details String?; ipAddress String?; userAgent String?; createdAt DateTime @default(now()); updatedAt DateTime @updatedAt }
